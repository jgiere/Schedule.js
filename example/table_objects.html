<!DOCTYPE html>
<!--
	Developed by Johannes Giere, jogiere AT gmail DOT com
-->
<html lang="de">
<head>
    <title></title>

    <meta charset="UTF-8">

    <script src="../table.js"></script>
</head>
<body onload="doIt()">
<script>

    function doIt() {
        let elements = [
            {
                'day': '2. Sunday after Christmas',
                'date': '26.12.2015',
                'time': '10:30',
                'place': 'Church Timmerlah'
            },
            {
                'day': 'New Years Eve',
                'date': '31.12.2015',
                'time': '19:00',
                'place': 'Church Sonnenberg'
            },
            {
                'day': '1. Sunday after Christmas',
                'date': '25.12.2015',
                'time': '11:30',
                'place': 'Church Sonnenberg'
            },
            {
                'day': 'Christmas Eve',
                'date': '24.12.2015',
                'time': '18:30',
                'place': 'Church Sonnenberg'
            }
        ];

        let elementKeys = ["day", "date", "time", "place"];

        let templateUrl = 'template.html';

        table = new Table(elementKeys, {'elements': elements, 'templateUrl': templateUrl}, function (table) {
            document.getElementById("listView").innerHTML = table.View;

        });

    }

    function search() {
        let phrase = document.getElementById('searchText').value;

        if (phrase !== '') {
            let searchResult = table.search(phrase);
            document.getElementById("listView").innerHTML = table.redrawView(searchResult);
        } else {
            document.getElementById("listView").innerHTML = table.redrawView();
        }
    }

    function sortBasedOnDateAsc() {
        document.getElementById("listView").innerHTML = table.redrawView(table.sort(table.Elements, 'date', {
            asc: true,
            type: 'datetime'
        }));
    }

    function sortBasedOnDateDesc() {
        document.getElementById("listView").innerHTML = table.redrawView(table.sort(table.Elements, 'date', {
            asc: false,
            type: 'datetime'
        }));
    }

    function doFiltering() {
        document.getElementById("listView").innerHTML = table.redrawView(table.filter(
            function (a) {
                return a > '11:00';
            },
            'time'));
    }
</script>

<input type="text" placeholder="Search" id="searchText"/>
<button onclick="search()">Search</button>
----
<button onclick="doFiltering()">Filter</button>

<button onclick="sortBasedOnDateAsc()">Sort on time ASC</button>
<button onclick="sortBasedOnDateDesc()">Sort on time DESC</button>


<div id="listView">

</div>
</body>
</html>
